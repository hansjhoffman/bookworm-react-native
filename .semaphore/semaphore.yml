version: v1.0
name: "Bookworm React Native"
agent:
  machine:
    type: e1-standard-2
    os_image: ubuntu1804

blocks:
  - name: "Build for Android"
    dependencies: []
    task:
      env_vars:
        - name: ANDROID_HOME
          value: /home/semaphore/android-sdk
      jobs:
      - name: Release ðŸš€
        commands:
          - wget -q https://dl.google.com/android/repository/sdk-tools-linux-4333796.zip
          - unzip -q sdk-tools-linux-4333796.zip -d android_sdk
          - yes | sdkmanager --licenses && yes | sdkmanager --update || exit 1
          # - checkout
          # - nvm use
          # - sem-version ruby 2.6.4
          # - cache restore
          # - yarn jetify
          # - bash ./android/prepare-ci.sh
          # - bundle exec fastlane release

# blocks:
#   - name: "Install dependencies"
#     dependencies: []
#     task:
#       jobs:
#         - name: yarn
#           commands:
#             - checkout
#             - nvm use
#             - yarn install
#             - cache store
#
#   - name: "Static analysis"
#     dependencies: ["Install dependencies"]
#     task:
#       prologue:
#         commands:
#           - checkout
#           - nvm use
#           - cache restore
#       secrets:
#         - name: bookworm-react-native
#       jobs:
#         - name: unit tests
#           commands:
#             - yarn test:ci
#             - bash <(curl -s https://codecov.io/bash)
